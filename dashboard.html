<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ZaimMarket ‚Äî –ú–∏–∫—Ä–æ–∫—Ä–µ–¥–∏—Ç—ã –æ–Ω–ª–∞–π–Ω –ø–æ–¥ 0.01%</title>

  <!-- SEO -->
  <meta name="description" content="ZaimMarket ‚Äî –æ–Ω–ª–∞–π–Ω-–∑–∞–π–º—ã –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ –ø–æ–¥ 0.01% –∑–∞ 5 –º–∏–Ω—É—Ç. –ë–µ–∑ –ø–æ—Ä—É—á–∏—Ç–µ–ª–µ–π, 24/7." />
  <meta name="keywords" content="–∑–∞–π–º, –º–∏–∫—Ä–æ–∑–∞–π–º, –æ–Ω–ª–∞–π–Ω –∑–∞–π–º, –±—ã—Å—Ç—Ä—ã–µ –¥–µ–Ω—å–≥–∏, ZaimMarket, –∫—Ä–µ–¥–∏—Ç—ã, 0.01%, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω" />
  <meta name="robots" content="index, follow" />
  <meta name="author" content="ZaimMarket" />

  <!-- Favicon -->
  <link rel="icon" href="favicon.ico" type="image/x-icon" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: system-ui, sans-serif;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-900">
  <div class="max-w-4xl mx-auto py-10 px-4">
    <div class="flex justify-between items-center mb-8">
      <h1 class="text-3xl font-bold text-blue-600">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
      <button id="logoutBtn" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600">–í—ã–π—Ç–∏</button>
    </div>

    <div id="userInfo" class="bg-white rounded-xl shadow-md p-6 space-y-3 mb-10">
      <!-- –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å -->
    </div>

    <h2 class="text-2xl font-bold mb-4">–°–ø–∏—Å–æ–∫ –ú–§–û</h2>
    <div id="mfoList" class="grid grid-cols-1 sm:grid-cols-2 gap-6">
      <!-- –ú–§–û –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å -->
    </div>
  </div>

  <script>
    const user = JSON.parse(localStorage.getItem('zaim_user'));
    const isLoggedIn = localStorage.getItem('isLoggedIn');

    if (!user || isLoggedIn !== 'true') {
      window.location.href = '/';
    }

    document.getElementById('userInfo').innerHTML = `
      <p><strong>–§–ò–û:</strong> ${user.surname} ${user.name}</p>
      <p><strong>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</strong> ${user.birth}</p>
      <p><strong>–ò–ò–ù:</strong> ${user.iin}</p>
      <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> ${user.phone}</p>
      ${user.card ? `
        <p><strong>–ö–∞—Ä—Ç–∞:</strong> ${user.card.number.replace(/\d{12}(\d{4})/, '************$1')}</p>
      ` : '<p class="text-red-500 font-semibold">–ö–∞—Ä—Ç–∞ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–∞</p>'}
    `;

    
const partners = [
  { name: "MoneyQ", url: "#", logo: "https://dummyimage.com/80x80/2563eb/ffffff&text=MQ" },
  { name: "–ó–∞–π–º–µ—Ä", url: "#", logo: "https://dummyimage.com/80x80/facc15/000000&text=ZM" },
  { name: "TurboMoney", url: "#", logo: "https://dummyimage.com/80x80/10b981/ffffff&text=TM" },
];

const list = document.getElementById('mfoList');
partners.forEach(mfo => {
  const card = document.createElement('div');
  card.className = 'bg-white p-6 rounded-2xl shadow-md hover:shadow-xl transition text-center';

  card.innerHTML = `
    <div class="mb-4">
      <img src="${mfo.logo}" alt="${mfo.name}" class="w-16 h-16 mx-auto rounded-full mb-2">
      <h3 class="text-xl font-bold text-gray-800">${mfo.name}</h3>
    </div>
    <div class="flex justify-center items-center gap-2 mb-4">
      <div class="bg-gray-100 border rounded-xl px-3 py-2 w-[100px] flex flex-col items-center text-sm font-medium text-gray-700">
        <span>‚Ç∏</span>
        <span>–°—É–º–º–∞ –¥–æ</span>
        <span class="font-semibold">500 000 ‚Ç∏</span>
      </div>
      <div class="bg-gray-100 border rounded-xl px-3 py-2 w-[100px] flex flex-col items-center text-sm font-medium text-gray-700">
        <span>%</span>
        <span>–°—Ç–∞–≤–∫–∞ –æ—Ç</span>
        <span class="font-semibold">0.1%</span>
      </div>
      <div class="bg-gray-100 border rounded-xl px-3 py-2 w-[100px] flex flex-col items-center text-sm font-medium text-gray-700">
        <span>18+</span>
        <span>–í–æ–∑—Ä–∞—Å—Ç –æ—Ç</span>
        <span class="font-semibold">18 –ª–µ—Ç</span>
      </div>
    </div>
    <a href="${mfo.url}" target="_blank" class="block bg-green-600 text-white py-2 rounded-full hover:bg-green-700 transition">–ü–æ–ª—É—á–∏—Ç—å –∑–∞–π–º</a>
  `;

  list.appendChild(card);
});


    document.getElementById('logoutBtn').addEventListener('click', () => {
      localStorage.removeItem('isLoggedIn');
      window.location.href = '/';
    });
  </script>
  
<!-- –ö–Ω–æ–ø–∫–∞ "–û—Ç–ø–∏—Å–∞—Ç—å—Å—è" -->
<div class="w-full flex justify-center mt-10 mb-20">
  <button
    id="unsubscribeBtn"
    class="bg-red-600 text-white px-6 py-3 rounded-full text-lg font-semibold hover:bg-red-700 transition"
  >
    –û—Ç–ø–∏—Å–∞—Ç—å—Å—è
  </button>
</div>

<script>
  document.getElementById("unsubscribeBtn")?.addEventListener("click", () => {
    alert("–ü–æ–∫–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø–∏—Å–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.");
    // –í –±—É–¥—É—â–µ–º: –∑–¥–µ—Å—å –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É, —É–¥–∞–ª—è—Ç—å –∫–∞—Ä—Ç—É –∏ —Ç.–¥.
  });
</script>

<script>
  const unsubscribeBtn = document.getElementById("unsubscribeBtn");

  if (unsubscribeBtn) {
    unsubscribeBtn.addEventListener("click", () => {
      const confirmed = confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç —É—Å–ª—É–≥?");
      if (confirmed) {
        const user = JSON.parse(localStorage.getItem("zaim_user"));
        if (user && user.card) {
          delete user.card; // —É–¥–∞–ª–∏—Ç—å –∫–∞—Ä—Ç—É
          localStorage.setItem("zaim_user", JSON.stringify(user));
        }
        localStorage.removeItem("subscriptionActive");
        localStorage.removeItem("subscriptionStartDate");
        alert("–í—ã —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø–∏—Å–∞–ª–∏—Å—å –æ—Ç —É—Å–ª—É–≥.");
        window.location.href = "/"; // –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é
      }
    });
  }
</script>

<script>
// ‚è∞ –ê–≤—Ç–æ–≤—ã—Ö–æ–¥ —á–µ—Ä–µ–∑ 20 –º–∏–Ω—É—Ç –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è
let sessionTimer;
const SESSION_TIMEOUT = 20 * 60 * 1000; // 20 –º–∏–Ω—É—Ç

function resetSessionTimer() {
  clearTimeout(sessionTimer);
  sessionTimer = setTimeout(() => {
    alert("–°–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∏–∑-–∑–∞ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è.");
    localStorage.removeItem("isLoggedIn");
    window.location.href = "/";
  }, SESSION_TIMEOUT);
}

// –û–±–Ω—É–ª—è–µ–º —Ç–∞–π–º–µ—Ä –ø—Ä–∏ –ª—é–±–æ–º –¥–µ–π—Å—Ç–≤–∏–∏
["click", "mousemove", "keydown", "scroll"].forEach(event => {
  document.addEventListener(event, resetSessionTimer);
});

resetSessionTimer();
</script>

<script>
  window.addEventListener('load', () => {
    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
    const user = JSON.parse(localStorage.getItem('zaim_user'));
    const subscriptionStart = localStorage.getItem('subscriptionStartDate');
    const subscriptionActive = localStorage.getItem('subscriptionActive') === 'true';

    if (isLoggedIn && user && subscriptionStart && subscriptionActive) {
      const now = new Date();
      const start = new Date(subscriptionStart);
      const diff = now - start;
      const week = 7 * 24 * 60 * 60 * 1000;

      if (diff >= week) {
        // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞—Ç—É –∏ –ø—Ä–æ–¥–ª–µ–≤–∞–µ–º
        const newStart = new Date().toISOString();
        localStorage.setItem('subscriptionStartDate', newStart);
        localStorage.setItem('subscriptionActive', 'true');
        console.log("üîÑ –ü–æ–¥–ø–∏—Å–∫–∞ –ø—Ä–æ–¥–ª–µ–Ω–∞ –Ω–∞ –Ω–µ–¥–µ–ª—é:", newStart);
        alert("üí≥ –ü–æ–¥–ø–∏—Å–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–¥–ª–µ–Ω–∞ –µ—â—ë –Ω–∞ 7 –¥–Ω–µ–π");
      }
    }
  });
</script>

</body>
</html>